<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Visualising</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R4SSP Semester 1 2022</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modules
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Intro</li>
    <li>
      <a href="01-intro.html">Intro to R and RStudio</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Data Focus</li>
    <li>
      <a href="02-visualise.html">Part 1: Visualising</a>
    </li>
    <li class="dropdown-header">Part 2: Subsetting</li>
    <li class="dropdown-header">Part 3: Transforming</li>
    <li class="dropdown-header">Part 4: Summarising</li>
    <li class="dropdown-header">Part 5: Communicating</li>
    <li class="divider"></li>
    <li class="dropdown-header">Programming focus</li>
    <li class="dropdown-header">Functions and Choices</li>
    <li class="dropdown-header">Repeating Code</li>
    <li class="dropdown-header">Workflows</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Handouts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="handout1.html">Handout 1</a>
    </li>
    <li>
      <a href="handout2.html">Handout 2</a>
    </li>
  </ul>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Visualising</h1>
<h4 class="date">Semester 1, 2022</h4>

</div>


<blockquote>
<h4 id="data-focus">Data Focus</h4>
<p>Modules and Handouts 2–6 cover topics that are part of the data
analysis journey and are all interrelated to one another. The way that
it has been separated is to introduce main topic but then each
subsequent topic will add in additional content for previous topics.
E.g. we start with data visualisation to introduce the basics of the
plotting systems but then each other handout will include extra options
and customisations.</p>
</blockquote>
<p><br />
</p>
<p><br />
</p>
<p>Handout: <a href="handout2.html">Handout 02 - Visualising
Data</a></p>
<p>Associated Readings:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/tidy-data.html">R for Data Science -
Chapter 12</a></li>
<li><a href="https://r4ds.had.co.nz/data-import.html">R for Data Science
- Chapter 11</a></li>
<li><a href="https://r4ds.had.co.nz/data-visualisation.html">R for Data
Science - Chapter 3</a></li>
</ul>
<div id="tabular-data" class="section level2">
<h2>Tabular Data</h2>
<p>In this module we begin to work with complete tables of data, and
learn how to make informative graphs. We begin by getting our scientific
research data into RStudio. Commonly, we first enter our data into Excel
for cleaning and organising, and save it out as a csv (comma separated
values) file. We then import the file into R for data analysis. We will
provide the csv file to be used with this document.</p>
<p>Note that in this document we are using Base R (the R functions that
are automatically available in RStudio). These Base R functions are
simple to work with, and are a good way to get familiar with R. In later
modules, we will meet some more sophisticated R tools which, while more
complicated, can also be more efficient.</p>
<p>Work carefully through each of the sections below, confirming that
all your outputs match ours. When you feel completely comfortable with
the content, move on to R for Data Science: Data Visualisation (<a
href="https://r4ds.had.co.nz/data-visualisation.html"
class="uri">https://r4ds.had.co.nz/data-visualisation.html</a>) which
covers advanced plotting with the ggplot library.</p>
<p>When you have completed this module, you should be ready to produce
the graphs and figures you will need for your in-course research
projects. If you run into any problems or have any questions, email us,
and/or come to the drop-in session Monday 10.00 to 12.00 in the Science
Library Seminar Room.</p>
</div>
<div id="preparation---do-this-very-carefully" class="section level2">
<h2>Preparation - Do this very carefully</h2>
<p>Document organisation is vitally important. We suggest that you keep
a separate folder for each R4SSP module. To do this, you can set up a
formal RStudio project (see for example <a
href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects"
class="uri">https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects</a>).
But if you don’t feel quite ready for that, you can just collect your
script file and data files together in a folder. Proceed as follows:</p>
<ol style="list-style-type: decimal">
<li><p>Launch R Studio</p></li>
<li><p>Following the procedure from <strong>Using a Script File</strong>
in Module 2 - Get Started with R, create a script file and save it to
your desktop or other location where you will be able to find
it.</p></li>
<li><p>Quit R Studio</p></li>
<li><p>Locate the script file you just made (it will have a .R file
suffix).</p></li>
<li><p>Create a new folder (name it something sensible) and place the
script file in it.</p></li>
<li><p>Retrieve the sample csv data file used in this module from the
course github repository <a href="#fn1" class="footnote-ref"
id="fnref1"><sup>1</sup></a>. Place the csv file into your data
folder.</p></li>
</ol>
<blockquote>
<p>Or you can download the file directly using R:</p>
<pre class="r"><code>download.file(url = &quot;https://raw.githubusercontent.com/rtis-training/2022-s1-r4ssp/main/data/r4ssp_donations_data.csv&quot;, 
             destfile = &quot;data/r4ssp_donations_data.csv&quot;)</code></pre>
<p>Please note this assumes you are using the project and structure
created in the last handout. Importantly if this doesn’t work for you
check that the “data” folder exists and matches exactly.</p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li>Open the folder and double-click <strong>on your script
file</strong> to open it in RStudio.</li>
</ol>
<p>If you set things up this way, RStudio will be able to find your data
file for the next step – importing data.</p>
<p><br />
</p>
</div>
<div id="importing-a-data-file" class="section level2">
<h2>Importing a data file</h2>
<p>The provided file <strong>r4ssp_donations_data.csv</strong> contains
the (fictitious) results of a study designed to explore the factors
which affect donations to street-corner charity collectors. Fifty
student researchers each spent four hours at one of 50 randomly selected
positions on George Street, collecting donations for <em>Blind Low
Vision NZ Guide Dogs</em>, an organisation that raises and trains
service dogs. Twenty-five of the collectors were accompanied by guide
dog puppies; the other 25 were alone. Assignment to the Puppy or Alone
conditions was done randomly. Each researcher recorded the total amount
of money collected during their four hour shift. The start of the data
file is shown below.</p>
<div class="figure" style="text-align: center">
<img src="images/02-donations_puppy.png" alt="Donations - Puppy or Alone" width="50%" />
<p class="caption">
Donations - Puppy or Alone
</p>
</div>
<p>We will import this file into R for some preliminary data
analysis.</p>
<p>To import a csv file into R we can use the function
<code>read_csv</code>. Like the R functions we used in Module 2,
<code>read_csv</code> accepts an argument between its round brackets.
The argument is the name of the input file. Because the name of the file
is a string, we surround it with double quotes. We will therefore
say:</p>
<p><code>read_csv("r4ssp_donations_data.csv")</code></p>
<p>However, we are not quite ready to run this command. The function
<code>read_csv</code> is not part of base R (the R functions that are
automatically available in RStudio). It is part of a
<strong>library</strong>, a set of additional functions that can be
loaded into RStudio. Function <code>read_csv</code> is part of the
<strong>readr</strong> library, and we load it with the
<code>library</code> command. We will therefore need two lines of
code:</p>
<p><code>library(readr)</code></p>
<p><code>read_csv("r4ssp_donations_data.csv")</code></p>
<p>Note that you only have to execute <code>library</code> once each
time you open RStudio. After loading a library, it is available for the
remainder of your R session (i.e. until you quit RStudio) and you can
call its functions as normal.</p>
<p><br />
</p>
</div>
<div id="import-and-check-your-data" class="section level2">
<h2>Import and check your data</h2>
<p>Type the following lines into your script file. Execute your commands
as you did in the previous module.</p>
<pre class="r"><code>library(readr)
read_csv(&quot;data/r4ssp_donations_data.csv&quot;)
#&gt; Rows: 50 Columns: 3
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: &quot;,&quot;
#&gt; chr (1): Condition
#&gt; dbl (2): CollectorNumber, Amount
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
#&gt; # A tibble: 50 × 3
#&gt;    CollectorNumber Amount Condition
#&gt;              &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    
#&gt;  1               1   190. Puppy    
#&gt;  2               2   178. Puppy    
#&gt;  3               3   178. Puppy    
#&gt;  4               4   210. Puppy    
#&gt;  5               5   188. Puppy    
#&gt;  6               6   199. Puppy    
#&gt;  7               7   180. Puppy    
#&gt;  8               8   195. Puppy    
#&gt;  9               9   186. Puppy    
#&gt; 10              10   233. Puppy    
#&gt; # … with 40 more rows</code></pre>
<p>NB: When you try to execute this code, you may receive an error
message: <em>Error in library(readr) : there is no package called
‘readr’</em>. If this happens it means that the functions in library
readr have not yet been installed on your computer. Please see
<strong>Appendix 2 - Installing Packages</strong> at the end of this
handout for instructions.</p>
<p>When imported into R, the data from the csv file are stored in an R
object called a <strong>tibble</strong>. A tibble is a slightly enhanced
version of a core R object called a <strong>data frame</strong>. Tibbles
and data frames are simply tables, organised into rows and columns. The
columns have names, and each row of the csv file becomes a row in the
data frame.</p>
<p>When you call <code>read_csv</code>, passing in a file name, R reads
in the file, converts it to a tibble, and displays it in the console.
The columns have the same names as in the csv file. We will see later
that we can use the column names to explore specific properties of our
data set.</p>
<p>R also gives you some information about how it understands the
contents of the file it has imported. In the console you will see the
words <strong>Parsed with column specification:</strong> followed by a
list of the imported columns.</p>
<p>Each column header is associated with a value
<strong>col_double()</strong>, or <strong>col_character()</strong>.
These indicate what kind of data R identified in the input file. Columns
that are <strong>col_double</strong> are numbers; columns that are
<strong>col_character</strong> are strings. The same information is
shown where RStudio prints the imported data. Beneath each column header
you will see <strong>dbl</strong> for numbers and <strong>chr</strong>
for strings.</p>
<p>This is a good moment to pause and check that your data have been
imported correctly. Data entry errors can cause R to make the wrong
assumptions about your data. If you have a column of numbers that
contains even one accidental alphabetic character (typos do happen) R
will consider the whole column to be strings. Later, R will give the
wrong results when you perform statistical analyses on these data (or it
will refuse to perform them at all).</p>
<p>You will often also see files imported with the function
<code>read.csv</code> (note the . instead of the _ ). This is the base R
function for importing files. To use <code>read.csv</code> you don’t
need to load a library first, but R doesn’t generate any information
about how it has parsed the data in the columns. You can use the
function <code>str</code> to get this information. Google for
details.</p>
<p>With both <code>read_csv</code> and <code>read.csv</code> R will
import the file and display its contents in the console, but this is not
quite enough. We want R to store the data in a named variable so that we
can refer to it later (i.e., do analyses on it). We do that with the
assignment operator, as we did in our previous module. For example, we
can say:</p>
<p><code>puppy_donations_data &lt;- read_csv("r4ssp_donations_data.csv")</code></p>
<p>Then, we can refer to this whole dataset any time with
<code>puppy_donations_data</code>.</p>
<p>Enter and run these commands:</p>
<pre class="r"><code># Load the library before the first time you call read_csv
library(readr)

# Read a csv file into R. Store the result in a named variable
puppy_donations_data &lt;- read_csv(&quot;data/r4ssp_donations_data.csv&quot;)
#&gt; Rows: 50 Columns: 3
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: &quot;,&quot;
#&gt; chr (1): Condition
#&gt; dbl (2): CollectorNumber, Amount
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

# As always in R, we can display the contents of a variable by simply typing its name.
puppy_donations_data
#&gt; # A tibble: 50 × 3
#&gt;    CollectorNumber Amount Condition
#&gt;              &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    
#&gt;  1               1   190. Puppy    
#&gt;  2               2   178. Puppy    
#&gt;  3               3   178. Puppy    
#&gt;  4               4   210. Puppy    
#&gt;  5               5   188. Puppy    
#&gt;  6               6   199. Puppy    
#&gt;  7               7   180. Puppy    
#&gt;  8               8   195. Puppy    
#&gt;  9               9   186. Puppy    
#&gt; 10              10   233. Puppy    
#&gt; # … with 40 more rows</code></pre>
<p><br />
</p>
</div>
<div id="perform-descriptive-analyses-on-columns"
class="section level2">
<h2>Perform descriptive analyses on columns</h2>
<p>It is always informative to begin data analysis by inspecting your
dependent variable (in this case, amount of money collected). Work
through each of the following steps, adding the code to your script file
(and remember to <strong>Save Often</strong>).</p>
<p>To select a single column from a data frame, we apply the
<strong>$</strong> operator to the data frame, and specify the column
name. The output is a <strong>vector</strong> containing the values in
the named column.</p>
<pre class="r"><code>
# Select a single column with $ and the column name
puppy_donations_data$Amount
#&gt;  [1] 190.38 177.51 178.09 209.87 187.87 198.60 179.60 195.11 185.56 232.98
#&gt; [11] 216.03 197.06 214.47 174.53 219.43 212.66 193.52 221.99 178.27 209.49
#&gt; [21] 199.28 191.20 208.00 178.99 194.26 121.53 118.48  67.32  84.30 119.68
#&gt; [31]  92.08  83.41  83.33 104.34 102.26 108.04 135.12 110.30  94.69 139.86
#&gt; [41]  97.36  73.75  86.17  88.94 146.30 114.49 101.28  93.41  92.41  98.69</code></pre>
<p>To simplify our later typing, we can use the assignment operator to
save the output into a named variable.</p>
<pre class="r"><code># Save a single column into a variable
amount_only &lt;- puppy_donations_data$Amount

# Display the variable
amount_only
#&gt;  [1] 190.38 177.51 178.09 209.87 187.87 198.60 179.60 195.11 185.56 232.98
#&gt; [11] 216.03 197.06 214.47 174.53 219.43 212.66 193.52 221.99 178.27 209.49
#&gt; [21] 199.28 191.20 208.00 178.99 194.26 121.53 118.48  67.32  84.30 119.68
#&gt; [31]  92.08  83.41  83.33 104.34 102.26 108.04 135.12 110.30  94.69 139.86
#&gt; [41]  97.36  73.75  86.17  88.94 146.30 114.49 101.28  93.41  92.41  98.69</code></pre>
<p>We can now apply R’s many, many statistical functions to our
variable.</p>
<div id="simple-plots---the-histogram" class="section level3">
<h3>Simple plots - the histogram</h3>
<p>First, let’s plot a histogram of the amounts collected, (ignoring the
Puppy/Alone condition), to get a quick sense of how much people are
donating. We generate this graph with function <code>hist</code>. The
graph will be displayed in the Plots tab of RStudio’s lower-right
pane.</p>
<pre class="r"><code>hist(amount_only)</code></pre>
<p><img src="figures/02-hist-1.png" width="672" /> Our data appear to be
bimodal (i.e. they have two peaks). This pattern can indicate the
presence of distinct groups in a data set, an informative result in this
study.</p>
</div>
<div id="simple-numeric-descriptive-statistics" class="section level3">
<h3>Simple numeric descriptive statistics</h3>
<p>We can also generate some useful numeric summaries:</p>
<pre class="r"><code># Compute the mathematical mean with function mean()
mean(amount_only)
#&gt; [1] 150.0458

# Compute the standard deviation with function sd()
sd(amount_only)
#&gt; [1] 51.4649

# Get a selection of distribution descriptors with function summary()
summary(amount_only)
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   67.32   99.34  160.41  150.05  194.90  232.98</code></pre>
<p>There are, literally, hundreds of interesting functions in R for
performing summary analyses. Sadly, we do not have time to cover them
all, but we encourage you to explore R textbooks and online resources to
learn more about them.</p>
</div>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>We can see that the mean amount is higher for collectors who had
puppies than for those who did not ($197.79 vs. $102.30). We can
illustrate this difference graphically using a boxplot.</p>
<p>The R function <code>boxplot</code> accepts two arguments.</p>
<p>The first argument is the <strong>formula</strong>. This is a
complex, yet very common, argument format for R statistical functions.
The formula describes a linear model for a data set with the general
structure: <strong>dependent or predicted variable ~ independent
variables or predictors</strong>, using columns names from the data
frame. The ~ (tilde) is read as “depends on” or “is predicted by”. For
our example, we are interested in the way that Amount is dependent on
the Puppy/Alone condition, so we specify our formula as <strong>Amount ~
Condition</strong>. We will see more complex examples of the formula
argument later in the semester.</p>
<p>The second argument to boxplot is the data frame.</p>
<pre class="r"><code>boxplot(Amount ~ Condition, puppy_donations_data)</code></pre>
<p><img src="figures/02-boxplot01-1.png" width="672" /></p>
<p>Boxplots efficiently illustrate both the central tendency and the
variability of a data set. Each grey box extends from the first quartile
to the third quartile of its input values. The dark line across the box
is at the median. The two thin lines outside the qrey box show the
values of the minimum and maximum scores, excluding extreme outliers. If
extreme outliers are present, they are shown as asterisks.</p>
<p>The <code>boxplot</code> function actually has many optional
arguments for things like adding legends and formatting plot axes, and
calls to this function can get quite elaborate. Because of this, it is
common to see the function called with its arguments named (as with
stringsAsFactors, above). For example:</p>
<pre class="r"><code>boxplot(formula = Amount ~ Condition, data = puppy_donations_data)</code></pre>
<p><img src="figures/02-boxplot02-1.png" width="672" /></p>
</div>
<div id="tidyverse---ggplot2" class="section level3">
<h3>Tidyverse - ggplot2</h3>
<p>There is a fantastic introduction to Data Visualisation using ggplot
in “R for Data Science” (<a
href="https://r4ds.had.co.nz/data-visualisation.html"
class="uri">https://r4ds.had.co.nz/data-visualisation.html</a>). It’s
highly recommended to have a read through this chapter as we’ll only
touch on a very brief introduction of this framework in this module.</p>
<p>The ggplot2 package is a popular data visualisation package for R. It
was developed by Hadley Wickham to implement the ‘grammar of graphics’.
In order to use it we need to first load it into R.</p>
<pre class="r"><code>library(ggplot2)</code></pre>
<p>ggplot tackles plotting reducing it into three components</p>
<ul>
<li>what is the data</li>
<li>how the data is mapped to aesthetics (aes)</li>
<li>how the data is represented geometrically (geom)</li>
</ul>
<p>So to create a plot using ggplot we need to specify these three
components.</p>
<p>Plots can then be made incrementally by adding on additional
layers.</p>
<p>We’ll now recreate the same plots as we did with the Base R plotting
system.</p>
<div id="scatter-plots" class="section level4">
<h4>Scatter plots</h4>
<p>Here you’ll see we’ve defined our data, we’ve mapped specific columns
to our axes, and are using a ‘point’ as our geometric
representation.</p>
<pre class="r"><code>ggplot(data = puppy_donations_data, mapping = aes(x = CollectorNumber, y = Amount)) + 
  geom_point()</code></pre>
<p><img src="figures/02-gg_point1-1.png" width="672" /></p>
<p>We can also store our plots in a variable to build upon</p>
<pre class="r"><code>p &lt;- ggplot(data = puppy_donations_data, mapping = aes(x = CollectorNumber, y = Amount))</code></pre>
<p>What does <code>p</code> actually contain?</p>
<pre class="r"><code>p</code></pre>
<p><img src="figures/02-gg-1.png" width="672" /></p>
<pre class="r"><code>p + geom_point()</code></pre>
<p><img src="figures/02-gg_point2-1.png" width="672" /></p>
<div id="specifiying-colour" class="section level5">
<h5>Specifiying colour</h5>
<p>Remember <code>p</code> contains our initial specification of the
data and mappings</p>
<pre class="r"><code>p + geom_point(colour = &#39;red&#39;)</code></pre>
<p><img src="figures/02-gg_point3-1.png" width="672" /></p>
</div>
<div id="mapping-colour-from-our-data" class="section level5">
<h5>Mapping colour from our data</h5>
<pre class="r"><code>p + geom_point(aes(colour = Condition))</code></pre>
<p><img src="figures/02-gg_point4-1.png" width="672" /> Notice that we
didn’t specify the colour for our points, instead we have told ggplot to
use colours based on the values that were found in the “Condition”
column using <code>aes</code>.</p>
<p><br />
</p>
</div>
</div>
<div id="line-plots" class="section level4">
<h4>Line plots</h4>
<p>In this case, we have the same data and mapping, but we want to have
the data represented by a line so we choose <code>geom_line</code> as
our “geom”.</p>
<pre class="r"><code>p + geom_line()</code></pre>
<p><img src="figures/02-gg_line1-1.png" width="672" /></p>
<div id="adding-layers" class="section level5">
<h5>Adding layers</h5>
<pre class="r"><code>p + 
  geom_line() + 
  geom_point()</code></pre>
<p><img src="figures/02-gg_line2-1.png" width="672" /></p>
<pre class="r"><code>p + 
  geom_line(colour = &#39;gold&#39;) + 
  geom_point(colour = &#39;tomato&#39;)</code></pre>
<p><img src="figures/02-gg_line3-1.png" width="672" /></p>
</div>
<div id="using-mappings" class="section level5">
<h5>Using mappings</h5>
<p>If you would like to plot individual lines based on a categorical
variable you can used a ‘group’ mapping:</p>
<pre class="r"><code>p + 
  geom_line(aes(group = Condition))</code></pre>
<p><img src="figures/02-gg_line4-1.png" width="672" /></p>
<p>We can specify separate aesthestics for each layer</p>
<pre class="r"><code>p + 
  geom_line(aes(colour = Condition)) + 
  geom_point(aes(colour = Condition))</code></pre>
<p><img src="figures/02-gg_line5-1.png" width="672" /></p>
<p>Note that colour will automatically imply a <em>group</em>.</p>
<p>or if it is common to all layers, we can specify them in the initial
setting up:</p>
<pre class="r"><code>ggplot(data = puppy_donations_data, 
       mapping = aes(x = CollectorNumber, 
                     y = Amount, 
                     colour = Condition)) + 
  geom_line() + 
  geom_point()</code></pre>
<p><img src="figures/02-gg_line6-1.png" width="672" /></p>
<p><br />
</p>
</div>
</div>
<div id="histogram" class="section level4">
<h4>Histogram</h4>
<p>A histogram is created from a single continuous variable.</p>
<pre class="r"><code>ggplot(data = puppy_donations_data, aes(x = Amount)) + 
  geom_histogram()
#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="figures/02-gg_hist-1.png" width="672" /></p>
<p><br />
</p>
</div>
<div id="boxplot" class="section level4">
<h4>Boxplot</h4>
<p>In ggplot, to create a boxplot, we need to specify a continuous
variable, and a categorical variable.</p>
<pre class="r"><code>ggplot(data = puppy_donations_data, aes(x = Condition, y = Amount)) + 
  geom_boxplot()</code></pre>
<p><img src="figures/02-gg_box1-1.png" width="672" /></p>
<p>Or you could make it horizontal by switching the the x/y
arguments.</p>
<pre class="r"><code>ggplot(data = puppy_donations_data, aes(x = Amount, y = Condition)) + 
  geom_boxplot()</code></pre>
<p><img src="figures/02-gg_box2-1.png" width="672" /></p>
<p><br />
</p>
</div>
</div>
<div id="customising" class="section level3">
<h3>Customising</h3>
<p>There are a multitude of customisations that can be done to plots
such as titles, labels, colours, etc.</p>
<p>A fantastic resource for looking at how to customise your plots made
using the Base R plotting system is the <a
href="https://r-graphics.org">R Graphics Cookbook</a>.</p>
<div id="themes" class="section level4">
<h4>Themes</h4>
<p>For ggplot, the plots are made up of <em>elements</em> and can be
customised using <code>theme()</code> or by picking one of the
pre-defined themes - e.g. <code>theme_bw()</code> provides a black/white
theme.</p>
<p>The main elements are</p>
<ul>
<li><code>element_text</code> for text</li>
<li><code>element_rect</code> for rectangular areas</li>
<li><code>element_line</code> for lines</li>
<li><code>element_blank</code> to remove/hide elements</li>
</ul>
<pre class="r"><code>ggplot(data = puppy_donations_data, aes(x = Condition, y = Amount)) + 
  geom_boxplot() + 
  theme(axis.title = element_text(size = 16), 
        panel.grid = element_blank(), 
        panel.background = element_rect(colour = &quot;blue&quot;, fill = &quot;light green&quot;))</code></pre>
<p><img src="figures/02-gg_theme1-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = puppy_donations_data, aes(x = Condition, y = Amount)) + 
  geom_boxplot() + 
  theme_bw()</code></pre>
<p><img src="figures/02-gg_theme2-1.png" width="672" /></p>
<p>There is also a fantastic cheat sheet available in RStudio under
<code>Help</code> -&gt; <code>Cheat Sheats</code> -&gt;
<code>Data Visualization with ggplot2</code></p>
<p><br />
</p>
<p><br />
</p>
</div>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This document has presented a simple introduction to working with
complete tables of data in R. We learned how to import a csv file into a
data frame, how to select columns and rows of interest from the data
frame, and how to perform simple, yet illustrative summaries on them. We
have covered only a tiny fraction of the data analyses you can perform
with R and RStudio. You can also do very complex statistics like ANOVA,
regression, factor analysis, and complex modelling. The specific
statistical analyses you will need to do for your in-course assignments
will depend on the papers you are taking, but you can be confident that
whatever your lecturers require can almost certainly by done efficiently
in R. As we proceed through the semester, if you wish to discuss a
particular data analysis, processing, or presentation task, please let
us know.</p>
<div id="whats-next" class="section level3">
<h3>What’s Next</h3>
<p>Fill in the module feedback form <a
href="https://tinyurl.com/r4ssp-module-fb">https://tinyurl.com/r4ssp-module-fb</a>.</p>
<p>Ensure you have the <code>tidyverse</code> package installed. Refer
to Appendix 2, or <a
href="https://r4ds.had.co.nz/introduction.html">https://r4ds.had.co.nz/introduction.html</a>
for how to do this.</p>
<p><br />
</p>
<p><br />
</p>
</div>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<div id="manual-data-entry-in-r" class="section level3">
<h3>Manual Data Entry in R</h3>
<p>For extremely small data sets, you can manually enter tabular data
into R. You create a vector for each data column using the combine
function <code>c</code>, and then collect those vectors into a data
frame:</p>
<pre class="r"><code>countries &lt;- c(&quot;Austria&quot;, &quot;Brazil&quot;, &quot;Canada&quot;)
capitals &lt;- c(&quot;Vienna&quot;, &quot;Brasilia&quot;, &quot;Ottawa&quot;)
population_in_millions &lt;- c(9, 211, 38)

geography_df &lt;- data.frame(Country = countries,
                           Capital = capitals,
                           PopulationMillions = population_in_millions)

geography_df
#&gt;   Country  Capital PopulationMillions
#&gt; 1 Austria   Vienna                  9
#&gt; 2  Brazil Brasilia                211
#&gt; 3  Canada   Ottawa                 38</code></pre>
</div>
<div id="installing-packages" class="section level3">
<h3>Installing Packages</h3>
<p>When R is installed, it comes with a large set of commands, data
structure, and functions which are together known as <strong>base
R</strong>. Over the years, researchers and programmer have written
thousands of additional functions and modules (called
<strong>libraries</strong>) that you can use in your own R code. This
<strong>third-party code</strong> is checked by moderators and, if it
passes inspection, loaded onto an official R server in a file structure
called a <strong>package</strong>. To use packages, you must first
download them to your computer. They are placed in the same folders
where base R was originally installed.</p>
<p>To access the functions in a package in your R code, you load the
package using the <code>library</code> command, as we saw above with
<strong>readr</strong>. You only need to download a package one time on
any machine, but the <code>library</code> command must be executed at
the start of each RStudio session (i.e. every time you launch
RStudio).</p>
<p>To install a package, use the <code>install.packages</code> command
passing the name of the package as the function argument. The name is a
string <strong>so must be surrounded by double quotes</strong>. To use
an installed package, use the <code>library</code> command, passing in
the name of the package. Now that the package has been installed, R
recognises it as an entity (like a variable) so you do not put double
quotes around the package name in the library command.</p>
<p>For example, when you want to use function <code>read_csv</code>,
contained in library <strong>readr</strong>:</p>
<pre class="r"><code>
# Download the reshape2 code to your machine
install.packages(&quot;readr&quot;)


# Load the library for the current session
library(readr)</code></pre>
</div>
<div id="tidyverse" class="section level3">
<h3>Tidyverse</h3>
<p>The tidyverse is a collection of packages (metapackage) that are an
(opinionated) way of performing analysis in R and are all designed to
operate nicely together. When <code>tidyverse</code> is installed it
actually is a wrapper that installs the individual packages that make up
the tidyverse core.</p>
<p>The tidyverse consists of a core set of packages to perform common
tasks in data analysis and are <code>ggplot2</code> (plotting),
<code>dplyr</code> (data manipulation), <code>tidyr</code> (data
tidying), <code>readr</code> (data importing), <code>purrr</code>
(functional programming), <code>tibble</code> (a special type of data
frame), <code>stringr</code> (common tasks for string manipulations),
and <code>forcats</code> (dealing with factors)</p>
<pre class="r"><code># Download and install the packages of tidyverse
install.packages(&quot;tidyverse&quot;)</code></pre>
<pre class="r"><code># load the tidyverse packages for the current session
library(tidyverse)
#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──
#&gt; ✓ tibble  3.1.6     ✓ dplyr   1.0.6
#&gt; ✓ tidyr   1.1.3     ✓ stringr 1.4.0
#&gt; ✓ purrr   0.3.4     ✓ forcats 0.5.1
#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
#&gt; x dplyr::filter() masks stats::filter()
#&gt; x dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div id="r-for-data-science-extra-packages" class="section level3">
<h3>R for Data science extra packages</h3>
<p>If you are following along with R for Data Science make sure you have
these packages installed:</p>
<ul>
<li>nycflights13</li>
<li>gapminder</li>
<li>Lahman</li>
</ul>
<pre class="r"><code>install.packages(c(&quot;nycflights13&quot;, &quot;gapminder&quot;, &quot;Lahman&quot;))</code></pre>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p><a
href="https://raw.githubusercontent.com/rtis-training/2022-s1-r4ssp/main/data/r4ssp_donations_data.csv"
class="uri">https://raw.githubusercontent.com/rtis-training/2022-s1-r4ssp/main/data/r4ssp_donations_data.csv</a><a
href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiVmlzdWFsaXNpbmciCmRhdGU6ICJTZW1lc3RlciAxLCAyMDIyIgpvdXRwdXQ6CiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogdHJ1ZQogICAgdG9jX2Zsb2F0OiB0cnVlCiAgICB0b2NfZGVwdGg6IDMKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKICAgIGNvZGVfZm9sZGluZzogc2hvdwotLS0KCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQpsaWJyYXJ5KGtuaXRyKQoKa25pdHI6Om9wdHNfY2h1bmskc2V0KAogIGNvbW1lbnQgPSAiIz4iLAogIGZpZy5wYXRoID0gImZpZ3VyZXMvIiwgIyB1c2Ugb25seSBmb3Igc2luZ2xlIFJtZCBmaWxlcwogIGNvbGxhcHNlID0gVFJVRSwKICBlY2hvID0gVFJVRQopCmBgYAoKPiAjIyMjIERhdGEgRm9jdXMKPgo+IE1vZHVsZXMgYW5kIEhhbmRvdXRzIDItLTYgY292ZXIgdG9waWNzIHRoYXQgYXJlIHBhcnQgb2YgdGhlIGRhdGEgYW5hbHlzaXMgam91cm5leSBhbmQgYXJlIGFsbCBpbnRlcnJlbGF0ZWQgdG8gb25lIGFub3RoZXIuIFRoZSB3YXkgdGhhdCBpdCBoYXMgYmVlbiBzZXBhcmF0ZWQgaXMgdG8gaW50cm9kdWNlIG1haW4gdG9waWMgYnV0IHRoZW4gZWFjaCBzdWJzZXF1ZW50IHRvcGljIHdpbGwgYWRkIGluIGFkZGl0aW9uYWwgY29udGVudCBmb3IgcHJldmlvdXMgdG9waWNzLiBFLmcuIHdlIHN0YXJ0IHdpdGggZGF0YSB2aXN1YWxpc2F0aW9uIHRvIGludHJvZHVjZSB0aGUgYmFzaWNzIG9mIHRoZSBwbG90dGluZyBzeXN0ZW1zIGJ1dCB0aGVuIGVhY2ggb3RoZXIgaGFuZG91dCB3aWxsIGluY2x1ZGUgZXh0cmEgb3B0aW9ucyBhbmQgY3VzdG9taXNhdGlvbnMuCgpcCgpcCgoKSGFuZG91dDogW0hhbmRvdXQgMDIgLSBWaXN1YWxpc2luZyBEYXRhXShoYW5kb3V0Mi5odG1sKQoKQXNzb2NpYXRlZCBSZWFkaW5nczoKCi0gW1IgZm9yIERhdGEgU2NpZW5jZSAtIENoYXB0ZXIgMTJdKGh0dHBzOi8vcjRkcy5oYWQuY28ubnovdGlkeS1kYXRhLmh0bWwpCi0gW1IgZm9yIERhdGEgU2NpZW5jZSAtIENoYXB0ZXIgMTFdKGh0dHBzOi8vcjRkcy5oYWQuY28ubnovZGF0YS1pbXBvcnQuaHRtbCkKLSBbUiBmb3IgRGF0YSBTY2llbmNlIC0gQ2hhcHRlciAzXShodHRwczovL3I0ZHMuaGFkLmNvLm56L2RhdGEtdmlzdWFsaXNhdGlvbi5odG1sKQoKCgojIyBUYWJ1bGFyIERhdGEKCkluIHRoaXMgbW9kdWxlIHdlIGJlZ2luIHRvIHdvcmsgd2l0aCBjb21wbGV0ZSB0YWJsZXMgb2YgZGF0YSwgYW5kIGxlYXJuIGhvdyB0byBtYWtlIGluZm9ybWF0aXZlIGdyYXBocy4gCldlIGJlZ2luIGJ5IGdldHRpbmcgb3VyIHNjaWVudGlmaWMgcmVzZWFyY2ggZGF0YSBpbnRvIFJTdHVkaW8uIENvbW1vbmx5LCB3ZSBmaXJzdCBlbnRlciBvdXIgZGF0YSBpbnRvIEV4Y2VsIGZvciBjbGVhbmluZyBhbmQgb3JnYW5pc2luZywgYW5kIHNhdmUgaXQgb3V0IGFzIGEgY3N2IChjb21tYSBzZXBhcmF0ZWQgdmFsdWVzKSBmaWxlLiBXZSB0aGVuIGltcG9ydCB0aGUgZmlsZSBpbnRvIFIgZm9yIGRhdGEgYW5hbHlzaXMuICAgV2Ugd2lsbCBwcm92aWRlIHRoZSBjc3YgZmlsZSB0byBiZSB1c2VkIHdpdGggdGhpcyBkb2N1bWVudC4KCk5vdGUgdGhhdCBpbiB0aGlzIGRvY3VtZW50IHdlIGFyZSB1c2luZyBCYXNlIFIgKHRoZSBSIGZ1bmN0aW9ucyB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGF2YWlsYWJsZSBpbiBSU3R1ZGlvKS4gVGhlc2UgQmFzZSBSIGZ1bmN0aW9ucyBhcmUgc2ltcGxlIHRvIHdvcmsgd2l0aCwgYW5kIGFyZSBhIGdvb2Qgd2F5IHRvIGdldCBmYW1pbGlhciB3aXRoIFIuIEluIGxhdGVyIG1vZHVsZXMsIHdlIHdpbGwgbWVldCBzb21lIG1vcmUgc29waGlzdGljYXRlZCBSIHRvb2xzIHdoaWNoLCB3aGlsZSBtb3JlIGNvbXBsaWNhdGVkLCBjYW4gYWxzbyBiZSBtb3JlIGVmZmljaWVudC4KCldvcmsgY2FyZWZ1bGx5IHRocm91Z2ggZWFjaCBvZiB0aGUgc2VjdGlvbnMgYmVsb3csIGNvbmZpcm1pbmcgdGhhdCBhbGwgeW91ciBvdXRwdXRzIG1hdGNoIG91cnMuIFdoZW4geW91IGZlZWwgY29tcGxldGVseSBjb21mb3J0YWJsZSB3aXRoIHRoZSBjb250ZW50LCBtb3ZlIG9uIHRvIFIgZm9yIERhdGEgU2NpZW5jZTogRGF0YSBWaXN1YWxpc2F0aW9uIChodHRwczovL3I0ZHMuaGFkLmNvLm56L2RhdGEtdmlzdWFsaXNhdGlvbi5odG1sKSB3aGljaCBjb3ZlcnMgYWR2YW5jZWQgcGxvdHRpbmcgd2l0aCB0aGUgZ2dwbG90IGxpYnJhcnkuCgpXaGVuIHlvdSBoYXZlIGNvbXBsZXRlZCB0aGlzIG1vZHVsZSwgeW91IHNob3VsZCBiZSByZWFkeSB0byBwcm9kdWNlIHRoZSBncmFwaHMgYW5kIGZpZ3VyZXMgeW91IHdpbGwgbmVlZCBmb3IgeW91ciBpbi1jb3Vyc2UgcmVzZWFyY2ggcHJvamVjdHMuIElmIHlvdSBydW4gaW50byBhbnkgcHJvYmxlbXMgb3IgaGF2ZSBhbnkgcXVlc3Rpb25zLCBlbWFpbCB1cywgYW5kL29yIGNvbWUgdG8gdGhlIGRyb3AtaW4gc2Vzc2lvbiBNb25kYXkgMTAuMDAgdG8gMTIuMDAgaW4gdGhlIFNjaWVuY2UgTGlicmFyeSBTZW1pbmFyIFJvb20uCgoKIyMgUHJlcGFyYXRpb24gLSBEbyB0aGlzIHZlcnkgY2FyZWZ1bGx5CgpEb2N1bWVudCBvcmdhbmlzYXRpb24gaXMgdml0YWxseSBpbXBvcnRhbnQuIFdlIHN1Z2dlc3QgdGhhdCB5b3Uga2VlcCBhIHNlcGFyYXRlIGZvbGRlciBmb3IgZWFjaCBSNFNTUCBtb2R1bGUuIFRvIGRvIHRoaXMsIHlvdSBjYW4gc2V0IHVwIGEgZm9ybWFsIFJTdHVkaW8gcHJvamVjdCAoc2VlIGZvciBleGFtcGxlIGh0dHBzOi8vc3VwcG9ydC5yc3R1ZGlvLmNvbS9oYy9lbi11cy9hcnRpY2xlcy8yMDA1MjYyMDctVXNpbmctUHJvamVjdHMpLiBCdXQgaWYgeW91IGRvbid0IGZlZWwgcXVpdGUgcmVhZHkgZm9yIHRoYXQsIHlvdSBjYW4ganVzdCBjb2xsZWN0IHlvdXIgc2NyaXB0IGZpbGUgYW5kIGRhdGEgZmlsZXMgdG9nZXRoZXIgaW4gYSBmb2xkZXIuIFByb2NlZWQgYXMgZm9sbG93czoKCgoxLiBMYXVuY2ggUiBTdHVkaW8KCjIuIEZvbGxvd2luZyB0aGUgcHJvY2VkdXJlIGZyb20gKipVc2luZyBhIFNjcmlwdCBGaWxlKiogaW4gTW9kdWxlIDIgLSBHZXQgU3RhcnRlZCB3aXRoIFIsIGNyZWF0ZSBhIHNjcmlwdCBmaWxlIGFuZCBzYXZlIGl0IHRvIHlvdXIgZGVza3RvcCBvciBvdGhlciBsb2NhdGlvbiB3aGVyZSB5b3Ugd2lsbCBiZSBhYmxlIHRvIGZpbmQgaXQuCgozLiBRdWl0IFIgU3R1ZGlvCgo0LiBMb2NhdGUgdGhlIHNjcmlwdCBmaWxlIHlvdSBqdXN0IG1hZGUgKGl0IHdpbGwgaGF2ZSBhIC5SIGZpbGUgc3VmZml4KS4gCgo1LiBDcmVhdGUgYSBuZXcgZm9sZGVyIChuYW1lIGl0IHNvbWV0aGluZyBzZW5zaWJsZSkgYW5kIHBsYWNlIHRoZSBzY3JpcHQgZmlsZSBpbiBpdC4KCjYuIFJldHJpZXZlIHRoZSBzYW1wbGUgY3N2IGRhdGEgZmlsZSB1c2VkIGluIHRoaXMgbW9kdWxlIGZyb20gdGhlIGNvdXJzZSBnaXRodWIgcmVwb3NpdG9yeSBeW2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ydGlzLXRyYWluaW5nLzIwMjItczEtcjRzc3AvbWFpbi9kYXRhL3I0c3NwX2RvbmF0aW9uc19kYXRhLmNzdl0uIFBsYWNlIHRoZSBjc3YgZmlsZSBpbnRvIHlvdXIgZGF0YSBmb2xkZXIuCgo+IE9yIHlvdSBjYW4gZG93bmxvYWQgdGhlIGZpbGUgZGlyZWN0bHkgdXNpbmcgUjoKPgo+IGBgYHtyLCBldmFsPUZBTFNFfQo+IGRvd25sb2FkLmZpbGUodXJsID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ydGlzLXRyYWluaW5nLzIwMjItczEtcjRzc3AvbWFpbi9kYXRhL3I0c3NwX2RvbmF0aW9uc19kYXRhLmNzdiIsIAo+ICAgICAgICAgICAgICBkZXN0ZmlsZSA9ICJkYXRhL3I0c3NwX2RvbmF0aW9uc19kYXRhLmNzdiIpCj4gYGBgCj4KPiBQbGVhc2Ugbm90ZSB0aGlzIGFzc3VtZXMgeW91IGFyZSB1c2luZyB0aGUgcHJvamVjdCBhbmQgc3RydWN0dXJlIGNyZWF0ZWQgaW4gdGhlIGxhc3QgaGFuZG91dC4gSW1wb3J0YW50bHkgaWYgdGhpcyBkb2Vzbid0IHdvcmsgZm9yIHlvdSBjaGVjayB0aGF0IHRoZSAiZGF0YSIgZm9sZGVyIGV4aXN0cyBhbmQgbWF0Y2hlcyBleGFjdGx5LgoKNy4gT3BlbiB0aGUgZm9sZGVyIGFuZCBkb3VibGUtY2xpY2sgKipvbiB5b3VyIHNjcmlwdCBmaWxlKiogdG8gb3BlbiBpdCBpbiBSU3R1ZGlvLgoKSWYgeW91IHNldCB0aGluZ3MgdXAgdGhpcyB3YXksIFJTdHVkaW8gd2lsbCBiZSBhYmxlIHRvIGZpbmQgeW91ciBkYXRhIGZpbGUgZm9yIHRoZSBuZXh0IHN0ZXAgLS0gaW1wb3J0aW5nIGRhdGEuCgpcCgojIyBJbXBvcnRpbmcgYSBkYXRhIGZpbGUKClRoZSBwcm92aWRlZCBmaWxlICoqcjRzc3BfZG9uYXRpb25zX2RhdGEuY3N2KiogY29udGFpbnMgdGhlIChmaWN0aXRpb3VzKSByZXN1bHRzIG9mIGEgc3R1ZHkgZGVzaWduZWQgdG8gZXhwbG9yZSB0aGUgZmFjdG9ycyB3aGljaCBhZmZlY3QgZG9uYXRpb25zIHRvIHN0cmVldC1jb3JuZXIgY2hhcml0eSBjb2xsZWN0b3JzLiBGaWZ0eSBzdHVkZW50IHJlc2VhcmNoZXJzIGVhY2ggc3BlbnQgZm91ciBob3VycyBhdCBvbmUgb2YgNTAgcmFuZG9tbHkgc2VsZWN0ZWQgcG9zaXRpb25zIG9uIEdlb3JnZSBTdHJlZXQsIGNvbGxlY3RpbmcgZG9uYXRpb25zIGZvciAqQmxpbmQgTG93IFZpc2lvbiBOWiBHdWlkZSBEb2dzKiwgYW4gb3JnYW5pc2F0aW9uIHRoYXQgcmFpc2VzIGFuZCB0cmFpbnMgc2VydmljZSBkb2dzLiBUd2VudHktZml2ZSBvZiB0aGUgY29sbGVjdG9ycyB3ZXJlIGFjY29tcGFuaWVkIGJ5IGd1aWRlIGRvZyBwdXBwaWVzOyB0aGUgb3RoZXIgMjUgd2VyZSBhbG9uZS4gQXNzaWdubWVudCB0byB0aGUgUHVwcHkgb3IgQWxvbmUgY29uZGl0aW9ucyB3YXMgZG9uZSByYW5kb21seS4gRWFjaCByZXNlYXJjaGVyIHJlY29yZGVkIHRoZSB0b3RhbCBhbW91bnQgb2YgbW9uZXkgY29sbGVjdGVkIGR1cmluZyB0aGVpciBmb3VyIGhvdXIgc2hpZnQuIFRoZSBzdGFydCBvZiB0aGUgZGF0YSBmaWxlIGlzIHNob3duIGJlbG93LgoKYGBge3IsIGZpZy5hbGlnbj0nY2VudGVyJywgb3V0LndpZHRoID0gIjUwJSIsIGZpZy5jYXAgPSAiRG9uYXRpb25zIC0gUHVwcHkgb3IgQWxvbmUiLCBmaWcucG9zID0gIkgiLCBlY2hvID0gRkFMU0V9CmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy8wMi1kb25hdGlvbnNfcHVwcHkucG5nIikKYGBgCgoKCldlIHdpbGwgaW1wb3J0IHRoaXMgZmlsZSBpbnRvIFIgZm9yIHNvbWUgcHJlbGltaW5hcnkgZGF0YSBhbmFseXNpcy4KClRvIGltcG9ydCBhIGNzdiBmaWxlIGludG8gUiB3ZSBjYW4gdXNlIHRoZSBmdW5jdGlvbiBgcmVhZF9jc3ZgLiBMaWtlIHRoZSBSIGZ1bmN0aW9ucyB3ZSB1c2VkIGluIE1vZHVsZSAyLCBgcmVhZF9jc3ZgIGFjY2VwdHMgYW4gYXJndW1lbnQgYmV0d2VlbiBpdHMgcm91bmQgYnJhY2tldHMuIFRoZSBhcmd1bWVudCBpcyB0aGUgbmFtZSBvZiB0aGUgaW5wdXQgZmlsZS4gQmVjYXVzZSB0aGUgbmFtZSBvZiB0aGUgZmlsZSBpcyBhIHN0cmluZywgd2Ugc3Vycm91bmQgaXQgd2l0aCBkb3VibGUgcXVvdGVzLiBXZSB3aWxsIHRoZXJlZm9yZSBzYXk6CgpgcmVhZF9jc3YoInI0c3NwX2RvbmF0aW9uc19kYXRhLmNzdiIpYAoKSG93ZXZlciwgd2UgYXJlIG5vdCBxdWl0ZSByZWFkeSB0byBydW4gdGhpcyBjb21tYW5kLiBUaGUgZnVuY3Rpb24gYHJlYWRfY3N2YCBpcyBub3QgcGFydCBvZiBiYXNlIFIgKHRoZSBSIGZ1bmN0aW9ucyB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGF2YWlsYWJsZSBpbiBSU3R1ZGlvKS4gSXQgaXMgcGFydCBvZiBhICoqbGlicmFyeSoqLCBhIHNldCBvZiBhZGRpdGlvbmFsIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSBsb2FkZWQgaW50byBSU3R1ZGlvLiBGdW5jdGlvbiBgcmVhZF9jc3ZgIGlzIHBhcnQgb2YgdGhlICoqcmVhZHIqKiBsaWJyYXJ5LCBhbmQgd2UgbG9hZCBpdCB3aXRoIHRoZSBgbGlicmFyeWAgY29tbWFuZC4gV2Ugd2lsbCB0aGVyZWZvcmUgbmVlZCB0d28gbGluZXMgb2YgY29kZToKCgpgbGlicmFyeShyZWFkcilgCgpgcmVhZF9jc3YoInI0c3NwX2RvbmF0aW9uc19kYXRhLmNzdiIpYAoKTm90ZSB0aGF0IHlvdSBvbmx5IGhhdmUgdG8gZXhlY3V0ZSBgbGlicmFyeWAgb25jZSBlYWNoIHRpbWUgeW91IG9wZW4gUlN0dWRpby4gQWZ0ZXIgbG9hZGluZyBhIGxpYnJhcnksIGl0IGlzIGF2YWlsYWJsZSBmb3IgdGhlIHJlbWFpbmRlciBvZiB5b3VyIFIgc2Vzc2lvbiAoaS5lLiB1bnRpbCB5b3UgcXVpdCBSU3R1ZGlvKSBhbmQgeW91IGNhbiBjYWxsIGl0cyBmdW5jdGlvbnMgYXMgbm9ybWFsLgoKXAoKIyMgSW1wb3J0IGFuZCBjaGVjayB5b3VyIGRhdGEKClR5cGUgdGhlIGZvbGxvd2luZyBsaW5lcyBpbnRvIHlvdXIgc2NyaXB0IGZpbGUuIEV4ZWN1dGUgeW91ciBjb21tYW5kcyBhcyB5b3UgZGlkIGluIHRoZSBwcmV2aW91cyBtb2R1bGUuCgpgYGB7ciByZWFkX2Nzdn0KbGlicmFyeShyZWFkcikKcmVhZF9jc3YoImRhdGEvcjRzc3BfZG9uYXRpb25zX2RhdGEuY3N2IikKYGBgCgpOQjogV2hlbiB5b3UgdHJ5IHRvIGV4ZWN1dGUgdGhpcyBjb2RlLCB5b3UgbWF5IHJlY2VpdmUgYW4gZXJyb3IgbWVzc2FnZTogKkVycm9yIGluIGxpYnJhcnkocmVhZHIpIDogdGhlcmUgaXMgbm8gcGFja2FnZSBjYWxsZWQg4oCYcmVhZHLigJkqLiBJZiB0aGlzIGhhcHBlbnMgaXQgbWVhbnMgdGhhdCB0aGUgZnVuY3Rpb25zIGluIGxpYnJhcnkgcmVhZHIgaGF2ZSBub3QgeWV0IGJlZW4gaW5zdGFsbGVkIG9uIHlvdXIgY29tcHV0ZXIuIFBsZWFzZSBzZWUgKipBcHBlbmRpeCAyIC0gSW5zdGFsbGluZyBQYWNrYWdlcyoqIGF0IHRoZSBlbmQgb2YgdGhpcyBoYW5kb3V0IGZvciBpbnN0cnVjdGlvbnMuCgpXaGVuIGltcG9ydGVkIGludG8gUiwgdGhlIGRhdGEgZnJvbSB0aGUgY3N2IGZpbGUgYXJlIHN0b3JlZCBpbiBhbiBSIG9iamVjdCBjYWxsZWQgYSAqKnRpYmJsZSoqLiBBIHRpYmJsZSBpcyBhIHNsaWdodGx5IGVuaGFuY2VkIHZlcnNpb24gb2YgYSBjb3JlIFIgb2JqZWN0IGNhbGxlZCBhICoqZGF0YSBmcmFtZSoqLiBUaWJibGVzIGFuZCBkYXRhIGZyYW1lcyBhcmUgc2ltcGx5IHRhYmxlcywgb3JnYW5pc2VkIGludG8gcm93cyBhbmQgY29sdW1ucy4gVGhlIGNvbHVtbnMgaGF2ZSBuYW1lcywgYW5kIGVhY2ggcm93IG9mIHRoZSBjc3YgZmlsZSBiZWNvbWVzIGEgcm93IGluIHRoZSBkYXRhIGZyYW1lLiAKCldoZW4geW91IGNhbGwgYHJlYWRfY3N2YCwgcGFzc2luZyBpbiBhIGZpbGUgbmFtZSwgUiByZWFkcyBpbiB0aGUgZmlsZSwgY29udmVydHMgaXQgdG8gYSB0aWJibGUsIGFuZCBkaXNwbGF5cyBpdCBpbiB0aGUgY29uc29sZS4gVGhlIGNvbHVtbnMgaGF2ZSB0aGUgc2FtZSBuYW1lcyBhcyBpbiB0aGUgY3N2IGZpbGUuIFdlIHdpbGwgc2VlIGxhdGVyIHRoYXQgd2UgY2FuIHVzZSB0aGUgY29sdW1uIG5hbWVzIHRvIGV4cGxvcmUgc3BlY2lmaWMgcHJvcGVydGllcyBvZiBvdXIgZGF0YSBzZXQuCgpSIGFsc28gZ2l2ZXMgeW91IHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgaG93IGl0IHVuZGVyc3RhbmRzIHRoZSBjb250ZW50cyBvZiB0aGUgZmlsZSBpdCBoYXMgaW1wb3J0ZWQuIEluIHRoZSBjb25zb2xlIHlvdSB3aWxsIHNlZSB0aGUgd29yZHMgKipQYXJzZWQgd2l0aCBjb2x1bW4gc3BlY2lmaWNhdGlvbjoqKiBmb2xsb3dlZCBieSBhIGxpc3Qgb2YgdGhlIGltcG9ydGVkIGNvbHVtbnMuIAoKRWFjaCBjb2x1bW4gaGVhZGVyIGlzIGFzc29jaWF0ZWQgd2l0aCBhIHZhbHVlICoqY29sX2RvdWJsZSgpKiosIG9yICoqY29sX2NoYXJhY3RlcigpKiouIFRoZXNlIGluZGljYXRlIHdoYXQga2luZCBvZiBkYXRhIFIgaWRlbnRpZmllZCBpbiB0aGUgaW5wdXQgZmlsZS4gQ29sdW1ucyB0aGF0IGFyZSAqKmNvbF9kb3VibGUqKiBhcmUgbnVtYmVyczsgY29sdW1ucyB0aGF0IGFyZSAqKmNvbF9jaGFyYWN0ZXIqKiBhcmUgc3RyaW5ncy4gVGhlIHNhbWUgaW5mb3JtYXRpb24gaXMgc2hvd24gd2hlcmUgUlN0dWRpbyBwcmludHMgdGhlIGltcG9ydGVkIGRhdGEuIEJlbmVhdGggZWFjaCBjb2x1bW4gaGVhZGVyIHlvdSB3aWxsIHNlZSAqKmRibCoqIGZvciBudW1iZXJzIGFuZCAqKmNocioqIGZvciBzdHJpbmdzLiAKClRoaXMgaXMgYSBnb29kIG1vbWVudCB0byBwYXVzZSBhbmQgY2hlY2sgdGhhdCB5b3VyIGRhdGEgaGF2ZSBiZWVuIGltcG9ydGVkIGNvcnJlY3RseS4gRGF0YSBlbnRyeSBlcnJvcnMgY2FuIGNhdXNlIFIgdG8gbWFrZSB0aGUgd3JvbmcgYXNzdW1wdGlvbnMgYWJvdXQgeW91ciBkYXRhLiBJZiB5b3UgaGF2ZSBhIGNvbHVtbiBvZiBudW1iZXJzIHRoYXQgY29udGFpbnMgZXZlbiBvbmUgYWNjaWRlbnRhbCBhbHBoYWJldGljIGNoYXJhY3RlciAodHlwb3MgZG8gaGFwcGVuKSBSIHdpbGwgY29uc2lkZXIgdGhlIHdob2xlIGNvbHVtbiB0byBiZSBzdHJpbmdzLiBMYXRlciwgUiB3aWxsIGdpdmUgdGhlIHdyb25nIHJlc3VsdHMgd2hlbiB5b3UgcGVyZm9ybSBzdGF0aXN0aWNhbCBhbmFseXNlcyBvbiB0aGVzZSBkYXRhIChvciBpdCB3aWxsIHJlZnVzZSB0byBwZXJmb3JtIHRoZW0gYXQgYWxsKS4gICAKCllvdSB3aWxsIG9mdGVuIGFsc28gc2VlIGZpbGVzIGltcG9ydGVkIHdpdGggdGhlIGZ1bmN0aW9uIGByZWFkLmNzdmAgKG5vdGUgdGhlIC4gaW5zdGVhZCBvZiB0aGUgXyApLiBUaGlzIGlzIHRoZSBiYXNlIFIgZnVuY3Rpb24gZm9yIGltcG9ydGluZyBmaWxlcy4gVG8gdXNlIGByZWFkLmNzdmAgeW91IGRvbid0IG5lZWQgdG8gbG9hZCBhIGxpYnJhcnkgZmlyc3QsIGJ1dCBSIGRvZXNuJ3QgZ2VuZXJhdGUgYW55IGluZm9ybWF0aW9uIGFib3V0IGhvdyBpdCBoYXMgcGFyc2VkIHRoZSBkYXRhIGluIHRoZSBjb2x1bW5zLiBZb3UgY2FuIHVzZSB0aGUgZnVuY3Rpb24gYHN0cmAgdG8gZ2V0IHRoaXMgaW5mb3JtYXRpb24uIEdvb2dsZSBmb3IgZGV0YWlscy4KCldpdGggYm90aCBgcmVhZF9jc3ZgIGFuZCBgcmVhZC5jc3ZgIFIgd2lsbCBpbXBvcnQgdGhlIGZpbGUgYW5kIGRpc3BsYXkgaXRzIGNvbnRlbnRzIGluIHRoZSBjb25zb2xlLCBidXQgdGhpcyBpcyBub3QgcXVpdGUgZW5vdWdoLiBXZSB3YW50IFIgdG8gc3RvcmUgdGhlIGRhdGEgaW4gYSBuYW1lZCB2YXJpYWJsZSBzbyB0aGF0IHdlIGNhbiByZWZlciB0byBpdCBsYXRlciAoaS5lLiwgZG8gYW5hbHlzZXMgb24gaXQpLiBXZSBkbyB0aGF0IHdpdGggdGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IsIGFzIHdlIGRpZCBpbiBvdXIgcHJldmlvdXMgbW9kdWxlLiBGb3IgZXhhbXBsZSwgd2UgY2FuIHNheToKCmBwdXBweV9kb25hdGlvbnNfZGF0YSA8LSByZWFkX2NzdigicjRzc3BfZG9uYXRpb25zX2RhdGEuY3N2IilgCgpUaGVuLCB3ZSBjYW4gcmVmZXIgdG8gdGhpcyB3aG9sZSBkYXRhc2V0IGFueSB0aW1lIHdpdGggYHB1cHB5X2RvbmF0aW9uc19kYXRhYC4KCkVudGVyIGFuZCBydW4gdGhlc2UgY29tbWFuZHM6CgpgYGB7ciBsb2FkX2RhdGF9CiMgTG9hZCB0aGUgbGlicmFyeSBiZWZvcmUgdGhlIGZpcnN0IHRpbWUgeW91IGNhbGwgcmVhZF9jc3YKbGlicmFyeShyZWFkcikKCiMgUmVhZCBhIGNzdiBmaWxlIGludG8gUi4gU3RvcmUgdGhlIHJlc3VsdCBpbiBhIG5hbWVkIHZhcmlhYmxlCnB1cHB5X2RvbmF0aW9uc19kYXRhIDwtIHJlYWRfY3N2KCJkYXRhL3I0c3NwX2RvbmF0aW9uc19kYXRhLmNzdiIpCgojIEFzIGFsd2F5cyBpbiBSLCB3ZSBjYW4gZGlzcGxheSB0aGUgY29udGVudHMgb2YgYSB2YXJpYWJsZSBieSBzaW1wbHkgdHlwaW5nIGl0cyBuYW1lLgpwdXBweV9kb25hdGlvbnNfZGF0YQoKYGBgCgpcCgojIyBQZXJmb3JtIGRlc2NyaXB0aXZlIGFuYWx5c2VzIG9uIGNvbHVtbnMKCkl0IGlzIGFsd2F5cyBpbmZvcm1hdGl2ZSB0byBiZWdpbiBkYXRhIGFuYWx5c2lzIGJ5IGluc3BlY3RpbmcgeW91ciBkZXBlbmRlbnQgdmFyaWFibGUgKGluIHRoaXMgY2FzZSwgYW1vdW50IG9mIG1vbmV5IGNvbGxlY3RlZCkuIFdvcmsgdGhyb3VnaCBlYWNoIG9mIHRoZSBmb2xsb3dpbmcgc3RlcHMsIGFkZGluZyB0aGUgY29kZSB0byB5b3VyIHNjcmlwdCBmaWxlIChhbmQgcmVtZW1iZXIgdG8gKipTYXZlIE9mdGVuKiopLgoKVG8gc2VsZWN0IGEgc2luZ2xlIGNvbHVtbiBmcm9tIGEgZGF0YSBmcmFtZSwgd2UgYXBwbHkgdGhlICoqJCoqIG9wZXJhdG9yIHRvIHRoZSBkYXRhIGZyYW1lLCBhbmQgc3BlY2lmeSB0aGUgY29sdW1uIG5hbWUuIFRoZSBvdXRwdXQgaXMgYSAqKnZlY3RvcioqIGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBpbiB0aGUgbmFtZWQgY29sdW1uLgoKYGBge3Igc2VsZWN0Q29sdW1ufQoKIyBTZWxlY3QgYSBzaW5nbGUgY29sdW1uIHdpdGggJCBhbmQgdGhlIGNvbHVtbiBuYW1lCnB1cHB5X2RvbmF0aW9uc19kYXRhJEFtb3VudApgYGAKClRvIHNpbXBsaWZ5IG91ciBsYXRlciB0eXBpbmcsIHdlIGNhbiB1c2UgdGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IgdG8gc2F2ZSB0aGUgb3V0cHV0IGludG8gYSBuYW1lZCB2YXJpYWJsZS4KCmBgYHtyIHNhdmVDb2x1bW59CiMgU2F2ZSBhIHNpbmdsZSBjb2x1bW4gaW50byBhIHZhcmlhYmxlCmFtb3VudF9vbmx5IDwtIHB1cHB5X2RvbmF0aW9uc19kYXRhJEFtb3VudAoKIyBEaXNwbGF5IHRoZSB2YXJpYWJsZQphbW91bnRfb25seQpgYGAKCgpXZSBjYW4gbm93IGFwcGx5IFIncyBtYW55LCBtYW55IHN0YXRpc3RpY2FsIGZ1bmN0aW9ucyB0byBvdXIgdmFyaWFibGUuCgoKIyMjIFNpbXBsZSBwbG90cyAtIHRoZSBoaXN0b2dyYW0KCkZpcnN0LCBsZXQncyBwbG90IGEgaGlzdG9ncmFtIG9mIHRoZSBhbW91bnRzIGNvbGxlY3RlZCwgKGlnbm9yaW5nIHRoZSBQdXBweS9BbG9uZSBjb25kaXRpb24pLCB0byBnZXQgYSBxdWljayBzZW5zZSBvZiBob3cgbXVjaCBwZW9wbGUgYXJlIGRvbmF0aW5nLiBXZSBnZW5lcmF0ZSB0aGlzIGdyYXBoIHdpdGggZnVuY3Rpb24gYGhpc3RgLiBUaGUgZ3JhcGggd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIFBsb3RzIHRhYiBvZiBSU3R1ZGlvJ3MgbG93ZXItcmlnaHQgcGFuZS4KCmBgYHtyIDAyLWhpc3R9Cmhpc3QoYW1vdW50X29ubHkpCmBgYApPdXIgZGF0YSBhcHBlYXIgdG8gYmUgYmltb2RhbCAoaS5lLiB0aGV5IGhhdmUgdHdvIHBlYWtzKS4gVGhpcyBwYXR0ZXJuIGNhbiBpbmRpY2F0ZSB0aGUgcHJlc2VuY2Ugb2YgZGlzdGluY3QgZ3JvdXBzIGluIGEgZGF0YSBzZXQsIGFuIGluZm9ybWF0aXZlIHJlc3VsdCBpbiB0aGlzIHN0dWR5LiAKCgojIyMgU2ltcGxlIG51bWVyaWMgZGVzY3JpcHRpdmUgc3RhdGlzdGljcwoKV2UgY2FuIGFsc28gZ2VuZXJhdGUgc29tZSB1c2VmdWwgbnVtZXJpYyBzdW1tYXJpZXM6CmBgYHtyIHNvbWVTdGF0c30KIyBDb21wdXRlIHRoZSBtYXRoZW1hdGljYWwgbWVhbiB3aXRoIGZ1bmN0aW9uIG1lYW4oKQptZWFuKGFtb3VudF9vbmx5KQoKIyBDb21wdXRlIHRoZSBzdGFuZGFyZCBkZXZpYXRpb24gd2l0aCBmdW5jdGlvbiBzZCgpCnNkKGFtb3VudF9vbmx5KQoKIyBHZXQgYSBzZWxlY3Rpb24gb2YgZGlzdHJpYnV0aW9uIGRlc2NyaXB0b3JzIHdpdGggZnVuY3Rpb24gc3VtbWFyeSgpCnN1bW1hcnkoYW1vdW50X29ubHkpCmBgYAoKVGhlcmUgYXJlLCBsaXRlcmFsbHksIGh1bmRyZWRzIG9mIGludGVyZXN0aW5nIGZ1bmN0aW9ucyBpbiBSIGZvciBwZXJmb3JtaW5nIHN1bW1hcnkgYW5hbHlzZXMuIFNhZGx5LCB3ZSBkbyBub3QgaGF2ZSB0aW1lIHRvIGNvdmVyIHRoZW0gYWxsLCBidXQgd2UgZW5jb3VyYWdlIHlvdSB0byBleHBsb3JlIFIgdGV4dGJvb2tzIGFuZCBvbmxpbmUgcmVzb3VyY2VzIHRvIGxlYXJuIG1vcmUgYWJvdXQgdGhlbS4KCgoKIyMjIEJveHBsb3RzCldlIGNhbiBzZWUgdGhhdCB0aGUgbWVhbiBhbW91bnQgaXMgaGlnaGVyIGZvciBjb2xsZWN0b3JzIHdobyBoYWQgcHVwcGllcyB0aGFuIGZvciB0aG9zZSB3aG8gZGlkIG5vdCAoJDE5Ny43OSB2cy4gJDEwMi4zMCkuIFdlIGNhbiBpbGx1c3RyYXRlIHRoaXMgZGlmZmVyZW5jZSBncmFwaGljYWxseSB1c2luZyBhIGJveHBsb3QuIAoKVGhlIFIgZnVuY3Rpb24gYGJveHBsb3RgIGFjY2VwdHMgdHdvIGFyZ3VtZW50cy4gCgpUaGUgZmlyc3QgYXJndW1lbnQgaXMgdGhlICoqZm9ybXVsYSoqLiBUaGlzIGlzIGEgY29tcGxleCwgeWV0IHZlcnkgY29tbW9uLCBhcmd1bWVudCBmb3JtYXQgZm9yIFIgc3RhdGlzdGljYWwgZnVuY3Rpb25zLiBUaGUgZm9ybXVsYSBkZXNjcmliZXMgYSBsaW5lYXIgbW9kZWwgZm9yIGEgZGF0YSBzZXQgd2l0aCB0aGUgZ2VuZXJhbCBzdHJ1Y3R1cmU6ICoqZGVwZW5kZW50IG9yIHByZWRpY3RlZCB2YXJpYWJsZSB+IGluZGVwZW5kZW50IHZhcmlhYmxlcyBvciBwcmVkaWN0b3JzKiosIHVzaW5nIGNvbHVtbnMgbmFtZXMgZnJvbSB0aGUgZGF0YSBmcmFtZS4gVGhlIH4gKHRpbGRlKSBpcyByZWFkIGFzICJkZXBlbmRzIG9uIiBvciAiaXMgcHJlZGljdGVkIGJ5Ii4gRm9yIG91ciBleGFtcGxlLCB3ZSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgd2F5IHRoYXQgQW1vdW50IGlzIGRlcGVuZGVudCBvbiB0aGUgUHVwcHkvQWxvbmUgY29uZGl0aW9uLCBzbyB3ZSBzcGVjaWZ5IG91ciBmb3JtdWxhIGFzICoqQW1vdW50IH4gQ29uZGl0aW9uKiouICBXZSB3aWxsIHNlZSBtb3JlIGNvbXBsZXggZXhhbXBsZXMgb2YgdGhlIGZvcm11bGEgYXJndW1lbnQgbGF0ZXIgaW4gdGhlIHNlbWVzdGVyLgoKClRoZSBzZWNvbmQgYXJndW1lbnQgdG8gYm94cGxvdCBpcyB0aGUgZGF0YSBmcmFtZS4KCmBgYHtyIDAyLWJveHBsb3QwMX0KYm94cGxvdChBbW91bnQgfiBDb25kaXRpb24sIHB1cHB5X2RvbmF0aW9uc19kYXRhKQpgYGAKCgpCb3hwbG90cyBlZmZpY2llbnRseSBpbGx1c3RyYXRlIGJvdGggdGhlIGNlbnRyYWwgdGVuZGVuY3kgYW5kIHRoZSB2YXJpYWJpbGl0eSBvZiBhIGRhdGEgc2V0LiBFYWNoIGdyZXkgYm94IGV4dGVuZHMgZnJvbSB0aGUgZmlyc3QgcXVhcnRpbGUgdG8gdGhlIHRoaXJkIHF1YXJ0aWxlIG9mIGl0cyBpbnB1dCB2YWx1ZXMuIFRoZSBkYXJrIGxpbmUgYWNyb3NzIHRoZSBib3ggaXMgYXQgdGhlIG1lZGlhbi4gVGhlIHR3byB0aGluIGxpbmVzIG91dHNpZGUgdGhlIHFyZXkgYm94IHNob3cgdGhlIHZhbHVlcyBvZiB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBzY29yZXMsIGV4Y2x1ZGluZyBleHRyZW1lIG91dGxpZXJzLiBJZiBleHRyZW1lIG91dGxpZXJzIGFyZSBwcmVzZW50LCB0aGV5IGFyZSBzaG93biBhcyBhc3Rlcmlza3MuCgpUaGUgYGJveHBsb3RgIGZ1bmN0aW9uIGFjdHVhbGx5IGhhcyBtYW55IG9wdGlvbmFsIGFyZ3VtZW50cyBmb3IgdGhpbmdzIGxpa2UgYWRkaW5nIGxlZ2VuZHMgYW5kIGZvcm1hdHRpbmcgcGxvdCBheGVzLCBhbmQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBjYW4gZ2V0IHF1aXRlIGVsYWJvcmF0ZS4gQmVjYXVzZSBvZiB0aGlzLCBpdCBpcyBjb21tb24gdG8gc2VlIHRoZSBmdW5jdGlvbiBjYWxsZWQgd2l0aCBpdHMgYXJndW1lbnRzIG5hbWVkIChhcyB3aXRoIHN0cmluZ3NBc0ZhY3RvcnMsIGFib3ZlKS4gRm9yIGV4YW1wbGU6CgpgYGB7ciAwMi1ib3hwbG90MDJ9CmJveHBsb3QoZm9ybXVsYSA9IEFtb3VudCB+IENvbmRpdGlvbiwgZGF0YSA9IHB1cHB5X2RvbmF0aW9uc19kYXRhKQpgYGAKCiMjIyBUaWR5dmVyc2UgLSBnZ3Bsb3QyCgoKVGhlcmUgaXMgYSBmYW50YXN0aWMgaW50cm9kdWN0aW9uIHRvIERhdGEgVmlzdWFsaXNhdGlvbiB1c2luZyBnZ3Bsb3QgaW4gIlIgZm9yIERhdGEgU2NpZW5jZSIgKGh0dHBzOi8vcjRkcy5oYWQuY28ubnovZGF0YS12aXN1YWxpc2F0aW9uLmh0bWwpLiBJdCdzIGhpZ2hseSByZWNvbW1lbmRlZCB0byBoYXZlIGEgcmVhZCB0aHJvdWdoIHRoaXMgY2hhcHRlciBhcyB3ZSdsbCBvbmx5IHRvdWNoIG9uIGEgdmVyeSBicmllZiBpbnRyb2R1Y3Rpb24gb2YgdGhpcyBmcmFtZXdvcmsgaW4gdGhpcyBtb2R1bGUuCgpUaGUgZ2dwbG90MiBwYWNrYWdlIGlzIGEgcG9wdWxhciBkYXRhIHZpc3VhbGlzYXRpb24gcGFja2FnZSBmb3IgUi4gSXQgd2FzIGRldmVsb3BlZCBieSBIYWRsZXkgV2lja2hhbSB0byBpbXBsZW1lbnQgdGhlICdncmFtbWFyIG9mIGdyYXBoaWNzJy4gSW4gb3JkZXIgdG8gdXNlIGl0IHdlIG5lZWQgdG8gZmlyc3QgbG9hZCBpdCBpbnRvIFIuCgoKCmBgYHtyfQpsaWJyYXJ5KGdncGxvdDIpCmBgYAoKZ2dwbG90IHRhY2tsZXMgcGxvdHRpbmcgcmVkdWNpbmcgaXQgaW50byB0aHJlZSBjb21wb25lbnRzCgotIHdoYXQgaXMgdGhlIGRhdGEKLSBob3cgdGhlIGRhdGEgaXMgbWFwcGVkIHRvIGFlc3RoZXRpY3MgKGFlcykKLSBob3cgdGhlIGRhdGEgaXMgcmVwcmVzZW50ZWQgZ2VvbWV0cmljYWxseSAoZ2VvbSkKClNvIHRvIGNyZWF0ZSBhIHBsb3QgdXNpbmcgZ2dwbG90IHdlIG5lZWQgdG8gc3BlY2lmeSB0aGVzZSB0aHJlZSBjb21wb25lbnRzLgoKClBsb3RzIGNhbiB0aGVuIGJlIG1hZGUgaW5jcmVtZW50YWxseSBieSBhZGRpbmcgb24gYWRkaXRpb25hbCBsYXllcnMuCgpXZSdsbCBub3cgcmVjcmVhdGUgdGhlIHNhbWUgcGxvdHMgYXMgd2UgZGlkIHdpdGggdGhlIEJhc2UgUiBwbG90dGluZyBzeXN0ZW0uCgojIyMjIFNjYXR0ZXIgcGxvdHMKCkhlcmUgeW91J2xsIHNlZSB3ZSd2ZSBkZWZpbmVkIG91ciBkYXRhLCB3ZSd2ZSBtYXBwZWQgc3BlY2lmaWMgY29sdW1ucyB0byBvdXIgYXhlcywgYW5kIGFyZSB1c2luZyBhICdwb2ludCcgYXMgb3VyIGdlb21ldHJpYyByZXByZXNlbnRhdGlvbi4KCmBgYHtyIDAyLWdnX3BvaW50MX0KZ2dwbG90KGRhdGEgPSBwdXBweV9kb25hdGlvbnNfZGF0YSwgbWFwcGluZyA9IGFlcyh4ID0gQ29sbGVjdG9yTnVtYmVyLCB5ID0gQW1vdW50KSkgKyAKICBnZW9tX3BvaW50KCkKYGBgCgpXZSBjYW4gYWxzbyBzdG9yZSBvdXIgcGxvdHMgaW4gYSB2YXJpYWJsZSB0byBidWlsZCB1cG9uCgpgYGB7cn0KcCA8LSBnZ3Bsb3QoZGF0YSA9IHB1cHB5X2RvbmF0aW9uc19kYXRhLCBtYXBwaW5nID0gYWVzKHggPSBDb2xsZWN0b3JOdW1iZXIsIHkgPSBBbW91bnQpKQpgYGAKCldoYXQgZG9lcyBgcGAgYWN0dWFsbHkgY29udGFpbj8KYGBge3IgMDItZ2d9CnAKYGBgCgoKYGBge3IgMDItZ2dfcG9pbnQyfQpwICsgZ2VvbV9wb2ludCgpCmBgYAoKCiMjIyMjIFNwZWNpZml5aW5nIGNvbG91cgoKUmVtZW1iZXIgYHBgIGNvbnRhaW5zIG91ciBpbml0aWFsIHNwZWNpZmljYXRpb24gb2YgdGhlIGRhdGEgYW5kIG1hcHBpbmdzCgpgYGB7ciAwMi1nZ19wb2ludDN9CnAgKyBnZW9tX3BvaW50KGNvbG91ciA9ICdyZWQnKQpgYGAKCiMjIyMjIE1hcHBpbmcgY29sb3VyIGZyb20gb3VyIGRhdGEKCmBgYHtyIDAyLWdnX3BvaW50NH0KcCArIGdlb21fcG9pbnQoYWVzKGNvbG91ciA9IENvbmRpdGlvbikpCmBgYApOb3RpY2UgdGhhdCB3ZSBkaWRuJ3Qgc3BlY2lmeSB0aGUgY29sb3VyIGZvciBvdXIgcG9pbnRzLCBpbnN0ZWFkIHdlIGhhdmUgdG9sZCBnZ3Bsb3QgdG8gdXNlIGNvbG91cnMgYmFzZWQgb24gdGhlIHZhbHVlcyB0aGF0IHdlcmUgZm91bmQgaW4gdGhlICJDb25kaXRpb24iIGNvbHVtbiB1c2luZyBgYWVzYC4KClwKCiMjIyMgTGluZSBwbG90cwoKSW4gdGhpcyBjYXNlLCB3ZSBoYXZlIHRoZSBzYW1lIGRhdGEgYW5kIG1hcHBpbmcsIGJ1dCB3ZSB3YW50IHRvIGhhdmUgdGhlIGRhdGEgcmVwcmVzZW50ZWQgYnkgYSBsaW5lIHNvIHdlIGNob29zZSBgZ2VvbV9saW5lYCBhcyBvdXIgImdlb20iLgoKYGBge3IgMDItZ2dfbGluZTF9CnAgKyBnZW9tX2xpbmUoKQpgYGAKCgoKCiMjIyMjIEFkZGluZyBsYXllcnMKCmBgYHtyIDAyLWdnX2xpbmUyfQpwICsgCiAgZ2VvbV9saW5lKCkgKyAKICBnZW9tX3BvaW50KCkKYGBgCgoKCmBgYHtyIDAyLWdnX2xpbmUzfQpwICsgCiAgZ2VvbV9saW5lKGNvbG91ciA9ICdnb2xkJykgKyAKICBnZW9tX3BvaW50KGNvbG91ciA9ICd0b21hdG8nKQpgYGAKCiMjIyMjIFVzaW5nIG1hcHBpbmdzCgpJZiB5b3Ugd291bGQgbGlrZSB0byBwbG90IGluZGl2aWR1YWwgbGluZXMgYmFzZWQgb24gYSBjYXRlZ29yaWNhbCB2YXJpYWJsZSB5b3UgY2FuIHVzZWQgYSAnZ3JvdXAnIG1hcHBpbmc6CgpgYGB7ciAwMi1nZ19saW5lNH0KcCArIAogIGdlb21fbGluZShhZXMoZ3JvdXAgPSBDb25kaXRpb24pKQpgYGAKCgpXZSBjYW4gc3BlY2lmeSBzZXBhcmF0ZSBhZXN0aGVzdGljcyBmb3IgZWFjaCBsYXllcgoKYGBge3IgMDItZ2dfbGluZTV9CnAgKyAKICBnZW9tX2xpbmUoYWVzKGNvbG91ciA9IENvbmRpdGlvbikpICsgCiAgZ2VvbV9wb2ludChhZXMoY29sb3VyID0gQ29uZGl0aW9uKSkKYGBgCgpOb3RlIHRoYXQgY29sb3VyIHdpbGwgYXV0b21hdGljYWxseSBpbXBseSBhIF9ncm91cF8uCgpvciBpZiBpdCBpcyBjb21tb24gdG8gYWxsIGxheWVycywgd2UgY2FuIHNwZWNpZnkgdGhlbSBpbiB0aGUgaW5pdGlhbCBzZXR0aW5nIHVwOgoKYGBge3IgMDItZ2dfbGluZTZ9CmdncGxvdChkYXRhID0gcHVwcHlfZG9uYXRpb25zX2RhdGEsIAogICAgICAgbWFwcGluZyA9IGFlcyh4ID0gQ29sbGVjdG9yTnVtYmVyLCAKICAgICAgICAgICAgICAgICAgICAgeSA9IEFtb3VudCwgCiAgICAgICAgICAgICAgICAgICAgIGNvbG91ciA9IENvbmRpdGlvbikpICsgCiAgZ2VvbV9saW5lKCkgKyAKICBnZW9tX3BvaW50KCkKYGBgCgpcCgojIyMjIEhpc3RvZ3JhbQoKQSBoaXN0b2dyYW0gaXMgY3JlYXRlZCBmcm9tIGEgc2luZ2xlIGNvbnRpbnVvdXMgdmFyaWFibGUuCgpgYGB7ciAwMi1nZ19oaXN0fQpnZ3Bsb3QoZGF0YSA9IHB1cHB5X2RvbmF0aW9uc19kYXRhLCBhZXMoeCA9IEFtb3VudCkpICsgCiAgZ2VvbV9oaXN0b2dyYW0oKQpgYGAKClwKCiMjIyMgQm94cGxvdAoKSW4gZ2dwbG90LCB0byBjcmVhdGUgYSBib3hwbG90LCB3ZSBuZWVkIHRvIHNwZWNpZnkgYSBjb250aW51b3VzIHZhcmlhYmxlLCBhbmQgYSBjYXRlZ29yaWNhbCB2YXJpYWJsZS4KCmBgYHtyIDAyLWdnX2JveDF9CmdncGxvdChkYXRhID0gcHVwcHlfZG9uYXRpb25zX2RhdGEsIGFlcyh4ID0gQ29uZGl0aW9uLCB5ID0gQW1vdW50KSkgKyAKICBnZW9tX2JveHBsb3QoKQpgYGAKCk9yIHlvdSBjb3VsZCBtYWtlIGl0IGhvcml6b250YWwgYnkgc3dpdGNoaW5nIHRoZSB0aGUgeC95IGFyZ3VtZW50cy4KCmBgYHtyIDAyLWdnX2JveDJ9CmdncGxvdChkYXRhID0gcHVwcHlfZG9uYXRpb25zX2RhdGEsIGFlcyh4ID0gQW1vdW50LCB5ID0gQ29uZGl0aW9uKSkgKyAKICBnZW9tX2JveHBsb3QoKQpgYGAKClwKCiMjIyBDdXN0b21pc2luZwoKVGhlcmUgYXJlIGEgbXVsdGl0dWRlIG9mIGN1c3RvbWlzYXRpb25zIHRoYXQgY2FuIGJlIGRvbmUgdG8gcGxvdHMgc3VjaCBhcyB0aXRsZXMsIGxhYmVscywgY29sb3VycywgZXRjLgoKQSBmYW50YXN0aWMgcmVzb3VyY2UgZm9yIGxvb2tpbmcgYXQgaG93IHRvIGN1c3RvbWlzZSB5b3VyIHBsb3RzIG1hZGUgdXNpbmcgdGhlIEJhc2UgUiBwbG90dGluZyBzeXN0ZW0gaXMgdGhlIFtSIEdyYXBoaWNzIENvb2tib29rXShodHRwczovL3ItZ3JhcGhpY3Mub3JnKS4KCiMjIyMgVGhlbWVzCgpGb3IgZ2dwbG90LCB0aGUgcGxvdHMgYXJlIG1hZGUgdXAgb2YgX2VsZW1lbnRzXyBhbmQgY2FuIGJlIGN1c3RvbWlzZWQgdXNpbmcgYHRoZW1lKClgIG9yIGJ5IHBpY2tpbmcgb25lIG9mIHRoZSBwcmUtZGVmaW5lZCB0aGVtZXMgLSBlLmcuIGB0aGVtZV9idygpYCBwcm92aWRlcyBhIGJsYWNrL3doaXRlIHRoZW1lLgoKVGhlIG1haW4gZWxlbWVudHMgYXJlCgotIGBlbGVtZW50X3RleHRgIGZvciB0ZXh0Ci0gYGVsZW1lbnRfcmVjdGAgZm9yIHJlY3Rhbmd1bGFyIGFyZWFzCi0gYGVsZW1lbnRfbGluZWAgZm9yIGxpbmVzCi0gYGVsZW1lbnRfYmxhbmtgIHRvIHJlbW92ZS9oaWRlIGVsZW1lbnRzCgpgYGB7ciAwMi1nZ190aGVtZTF9CmdncGxvdChkYXRhID0gcHVwcHlfZG9uYXRpb25zX2RhdGEsIGFlcyh4ID0gQ29uZGl0aW9uLCB5ID0gQW1vdW50KSkgKyAKICBnZW9tX2JveHBsb3QoKSArIAogIHRoZW1lKGF4aXMudGl0bGUgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDE2KSwgCiAgICAgICAgcGFuZWwuZ3JpZCA9IGVsZW1lbnRfYmxhbmsoKSwgCiAgICAgICAgcGFuZWwuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChjb2xvdXIgPSAiYmx1ZSIsIGZpbGwgPSAibGlnaHQgZ3JlZW4iKSkKCmBgYAoKCgpgYGB7ciAwMi1nZ190aGVtZTJ9CmdncGxvdChkYXRhID0gcHVwcHlfZG9uYXRpb25zX2RhdGEsIGFlcyh4ID0gQ29uZGl0aW9uLCB5ID0gQW1vdW50KSkgKyAKICBnZW9tX2JveHBsb3QoKSArIAogIHRoZW1lX2J3KCkKYGBgCgoKClRoZXJlIGlzIGFsc28gYSBmYW50YXN0aWMgY2hlYXQgc2hlZXQgYXZhaWxhYmxlIGluIFJTdHVkaW8gdW5kZXIgYEhlbHBgIC0+IGBDaGVhdCBTaGVhdHNgIC0+IGBEYXRhIFZpc3VhbGl6YXRpb24gd2l0aCBnZ3Bsb3QyYAoKXAoKXAoKIyMgQ29uY2x1c2lvbgoKVGhpcyBkb2N1bWVudCBoYXMgcHJlc2VudGVkIGEgc2ltcGxlIGludHJvZHVjdGlvbiB0byB3b3JraW5nIHdpdGggY29tcGxldGUgdGFibGVzIG9mIGRhdGEgaW4gUi4gV2UgbGVhcm5lZCBob3cgdG8gaW1wb3J0IGEgY3N2IGZpbGUgaW50byBhIGRhdGEgZnJhbWUsIGhvdyB0byBzZWxlY3QgY29sdW1ucyBhbmQgcm93cyBvZiBpbnRlcmVzdCBmcm9tIHRoZSBkYXRhIGZyYW1lLCBhbmQgaG93IHRvIHBlcmZvcm0gc2ltcGxlLCB5ZXQgaWxsdXN0cmF0aXZlIHN1bW1hcmllcyBvbiB0aGVtLiBXZSBoYXZlIGNvdmVyZWQgb25seSBhIHRpbnkgZnJhY3Rpb24gb2YgdGhlIGRhdGEgYW5hbHlzZXMgeW91IGNhbiBwZXJmb3JtIHdpdGggUiBhbmQgUlN0dWRpby4gWW91IGNhbiBhbHNvIGRvIHZlcnkgY29tcGxleCBzdGF0aXN0aWNzIGxpa2UgQU5PVkEsIHJlZ3Jlc3Npb24sIGZhY3RvciBhbmFseXNpcywgYW5kIGNvbXBsZXggbW9kZWxsaW5nLiBUaGUgc3BlY2lmaWMgc3RhdGlzdGljYWwgYW5hbHlzZXMgeW91IHdpbGwgbmVlZCB0byBkbyBmb3IgeW91ciBpbi1jb3Vyc2UgYXNzaWdubWVudHMgd2lsbCBkZXBlbmQgb24gdGhlIHBhcGVycyB5b3UgYXJlIHRha2luZywgYnV0IHlvdSBjYW4gYmUgY29uZmlkZW50IHRoYXQgd2hhdGV2ZXIgeW91ciBsZWN0dXJlcnMgcmVxdWlyZSBjYW4gYWxtb3N0IGNlcnRhaW5seSBieSBkb25lIGVmZmljaWVudGx5IGluIFIuIEFzIHdlIHByb2NlZWQgdGhyb3VnaCB0aGUgc2VtZXN0ZXIsIGlmIHlvdSB3aXNoIHRvIGRpc2N1c3MgYSBwYXJ0aWN1bGFyIGRhdGEgYW5hbHlzaXMsIHByb2Nlc3NpbmcsIG9yIHByZXNlbnRhdGlvbiB0YXNrLCBwbGVhc2UgbGV0IHVzIGtub3cuCgoKIyMjIFdoYXQncyBOZXh0CgpGaWxsIGluIHRoZSBtb2R1bGUgZmVlZGJhY2sgZm9ybSBbaHR0cHM6Ly90aW55dXJsLmNvbS9yNHNzcC1tb2R1bGUtZmJdKGh0dHBzOi8vdGlueXVybC5jb20vcjRzc3AtbW9kdWxlLWZiKS4KCkVuc3VyZSB5b3UgaGF2ZSB0aGUgYHRpZHl2ZXJzZWAgcGFja2FnZSBpbnN0YWxsZWQuIFJlZmVyIHRvIEFwcGVuZGl4IDIsIG9yIFtodHRwczovL3I0ZHMuaGFkLmNvLm56L2ludHJvZHVjdGlvbi5odG1sXShodHRwczovL3I0ZHMuaGFkLmNvLm56L2ludHJvZHVjdGlvbi5odG1sKSBmb3IgaG93IHRvIGRvIHRoaXMuCiAKCgpcCgpcCgojIyBBcHBlbmRpeAoKIyMjIE1hbnVhbCBEYXRhIEVudHJ5IGluIFIKCkZvciBleHRyZW1lbHkgc21hbGwgZGF0YSBzZXRzLCB5b3UgY2FuIG1hbnVhbGx5IGVudGVyIHRhYnVsYXIgZGF0YSBpbnRvIFIuIFlvdSBjcmVhdGUgYSB2ZWN0b3IgZm9yIGVhY2ggZGF0YSBjb2x1bW4gdXNpbmcgdGhlIGNvbWJpbmUgZnVuY3Rpb24gYGNgLCBhbmQgdGhlbiBjb2xsZWN0IHRob3NlIHZlY3RvcnMgaW50byBhIGRhdGEgZnJhbWU6CgpgYGB7ciBtYW51YWwgZGF0YSAxfQpjb3VudHJpZXMgPC0gYygiQXVzdHJpYSIsICJCcmF6aWwiLCAiQ2FuYWRhIikKY2FwaXRhbHMgPC0gYygiVmllbm5hIiwgIkJyYXNpbGlhIiwgIk90dGF3YSIpCnBvcHVsYXRpb25faW5fbWlsbGlvbnMgPC0gYyg5LCAyMTEsIDM4KQoKZ2VvZ3JhcGh5X2RmIDwtIGRhdGEuZnJhbWUoQ291bnRyeSA9IGNvdW50cmllcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FwaXRhbCA9IGNhcGl0YWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICBQb3B1bGF0aW9uTWlsbGlvbnMgPSBwb3B1bGF0aW9uX2luX21pbGxpb25zKQoKZ2VvZ3JhcGh5X2RmCmBgYAoKCiMjIyBJbnN0YWxsaW5nIFBhY2thZ2VzCgpXaGVuIFIgaXMgaW5zdGFsbGVkLCBpdCBjb21lcyB3aXRoIGEgbGFyZ2Ugc2V0IG9mIGNvbW1hbmRzLCBkYXRhIHN0cnVjdHVyZSwgYW5kIGZ1bmN0aW9ucyB3aGljaCBhcmUgdG9nZXRoZXIga25vd24gYXMgKipiYXNlIFIqKi4gT3ZlciB0aGUgeWVhcnMsIHJlc2VhcmNoZXJzIGFuZCBwcm9ncmFtbWVyIGhhdmUgd3JpdHRlbiB0aG91c2FuZHMgb2YgYWRkaXRpb25hbCBmdW5jdGlvbnMgYW5kIG1vZHVsZXMgKGNhbGxlZCAqKmxpYnJhcmllcyoqKSB0aGF0IHlvdSBjYW4gdXNlIGluIHlvdXIgb3duIFIgY29kZS4gVGhpcyAqKnRoaXJkLXBhcnR5IGNvZGUqKiBpcyBjaGVja2VkIGJ5IG1vZGVyYXRvcnMgYW5kLCBpZiBpdCBwYXNzZXMgaW5zcGVjdGlvbiwgbG9hZGVkIG9udG8gYW4gb2ZmaWNpYWwgUiBzZXJ2ZXIgaW4gYSBmaWxlIHN0cnVjdHVyZSBjYWxsZWQgYSAqKnBhY2thZ2UqKi4gVG8gdXNlIHBhY2thZ2VzLCB5b3UgbXVzdCBmaXJzdCBkb3dubG9hZCB0aGVtIHRvIHlvdXIgY29tcHV0ZXIuIFRoZXkgYXJlIHBsYWNlZCBpbiB0aGUgc2FtZSBmb2xkZXJzIHdoZXJlIGJhc2UgUiB3YXMgb3JpZ2luYWxseSBpbnN0YWxsZWQuIAoKVG8gYWNjZXNzIHRoZSBmdW5jdGlvbnMgaW4gYSBwYWNrYWdlIGluIHlvdXIgUiBjb2RlLCB5b3UgbG9hZCB0aGUgcGFja2FnZSB1c2luZyB0aGUgYGxpYnJhcnlgIGNvbW1hbmQsIGFzIHdlIHNhdyBhYm92ZSB3aXRoICoqcmVhZHIqKi4gWW91IG9ubHkgbmVlZCB0byBkb3dubG9hZCBhIHBhY2thZ2Ugb25lIHRpbWUgb24gYW55IG1hY2hpbmUsIGJ1dCB0aGUgYGxpYnJhcnlgIGNvbW1hbmQgbXVzdCBiZSBleGVjdXRlZCBhdCB0aGUgc3RhcnQgb2YgZWFjaCBSU3R1ZGlvIHNlc3Npb24gKGkuZS4gZXZlcnkgdGltZSB5b3UgbGF1bmNoIFJTdHVkaW8pLgoKVG8gaW5zdGFsbCBhIHBhY2thZ2UsIHVzZSB0aGUgYGluc3RhbGwucGFja2FnZXNgIGNvbW1hbmQgcGFzc2luZyB0aGUgbmFtZSBvZiB0aGUgcGFja2FnZSBhcyB0aGUgZnVuY3Rpb24gYXJndW1lbnQuIFRoZSBuYW1lIGlzIGEgc3RyaW5nICoqc28gbXVzdCBiZSBzdXJyb3VuZGVkIGJ5IGRvdWJsZSBxdW90ZXMqKi4gVG8gdXNlIGFuIGluc3RhbGxlZCBwYWNrYWdlLCB1c2UgdGhlIGBsaWJyYXJ5YCBjb21tYW5kLCBwYXNzaW5nIGluIHRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlLiBOb3cgdGhhdCB0aGUgcGFja2FnZSBoYXMgYmVlbiBpbnN0YWxsZWQsIFIgcmVjb2duaXNlcyBpdCBhcyBhbiBlbnRpdHkgKGxpa2UgYSB2YXJpYWJsZSkgc28geW91IGRvIG5vdCBwdXQgZG91YmxlIHF1b3RlcyBhcm91bmQgdGhlIHBhY2thZ2UgbmFtZSBpbiB0aGUgbGlicmFyeSBjb21tYW5kLgoKRm9yIGV4YW1wbGUsIHdoZW4geW91IHdhbnQgdG8gdXNlIGZ1bmN0aW9uIGByZWFkX2NzdmAsIGNvbnRhaW5lZCBpbiBsaWJyYXJ5ICoqcmVhZHIqKjoKCmBgYHtyIGdldHRpbmcgcmVhZHIsIGV2YWwgPSBGQUxTRX0KCiMgRG93bmxvYWQgdGhlIHJlc2hhcGUyIGNvZGUgdG8geW91ciBtYWNoaW5lCmluc3RhbGwucGFja2FnZXMoInJlYWRyIikKCgojIExvYWQgdGhlIGxpYnJhcnkgZm9yIHRoZSBjdXJyZW50IHNlc3Npb24KbGlicmFyeShyZWFkcikKYGBgCgojIyMgVGlkeXZlcnNlCgpUaGUgdGlkeXZlcnNlIGlzIGEgY29sbGVjdGlvbiBvZiBwYWNrYWdlcyAobWV0YXBhY2thZ2UpIHRoYXQgYXJlIGFuIChvcGluaW9uYXRlZCkgd2F5IG9mIHBlcmZvcm1pbmcgYW5hbHlzaXMgaW4gUiBhbmQgYXJlIGFsbCBkZXNpZ25lZCB0byBvcGVyYXRlIG5pY2VseSB0b2dldGhlci4gV2hlbiBgdGlkeXZlcnNlYCBpcyBpbnN0YWxsZWQgaXQgYWN0dWFsbHkgaXMgYSB3cmFwcGVyIHRoYXQgaW5zdGFsbHMgdGhlIGluZGl2aWR1YWwgcGFja2FnZXMgdGhhdCBtYWtlIHVwIHRoZSB0aWR5dmVyc2UgY29yZS4KClRoZSB0aWR5dmVyc2UgY29uc2lzdHMgb2YgYSBjb3JlIHNldCBvZiBwYWNrYWdlcyB0byBwZXJmb3JtIGNvbW1vbiB0YXNrcyBpbiBkYXRhIGFuYWx5c2lzIGFuZCBhcmUgYGdncGxvdDJgIChwbG90dGluZyksIGBkcGx5cmAgKGRhdGEgbWFuaXB1bGF0aW9uKSwgYHRpZHlyYCAoZGF0YSB0aWR5aW5nKSwgYHJlYWRyYCAoZGF0YSBpbXBvcnRpbmcpLCBgcHVycnJgIChmdW5jdGlvbmFsIHByb2dyYW1taW5nKSwgYHRpYmJsZWAgKGEgc3BlY2lhbCB0eXBlIG9mIGRhdGEgZnJhbWUpLCBgc3RyaW5ncmAgKGNvbW1vbiB0YXNrcyBmb3Igc3RyaW5nIG1hbmlwdWxhdGlvbnMpLCBhbmQgIGBmb3JjYXRzYCAoZGVhbGluZyB3aXRoIGZhY3RvcnMpCgoKYGBge3IgaW5zdGFsbCB0aWR5dmVyc2UsIGV2YWwgPSBGQUxTRX0KIyBEb3dubG9hZCBhbmQgaW5zdGFsbCB0aGUgcGFja2FnZXMgb2YgdGlkeXZlcnNlCmluc3RhbGwucGFja2FnZXMoInRpZHl2ZXJzZSIpCmBgYAoKCmBgYHtyfQojIGxvYWQgdGhlIHRpZHl2ZXJzZSBwYWNrYWdlcyBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbgpsaWJyYXJ5KHRpZHl2ZXJzZSkKYGBgCgojIyMgUiBmb3IgRGF0YSBzY2llbmNlIGV4dHJhIHBhY2thZ2VzCgpJZiB5b3UgYXJlIGZvbGxvd2luZyBhbG9uZyB3aXRoIFIgZm9yIERhdGEgU2NpZW5jZSBtYWtlIHN1cmUgeW91IGhhdmUgdGhlc2UgcGFja2FnZXMgaW5zdGFsbGVkOgoKLSBueWNmbGlnaHRzMTMKLSBnYXBtaW5kZXIKLSBMYWhtYW4KCmBgYHtyLCBldmFsID0gRkFMU0V9Cmluc3RhbGwucGFja2FnZXMoYygibnljZmxpZ2h0czEzIiwgImdhcG1pbmRlciIsICJMYWhtYW4iKSkKYGBgCgoKCgoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("02-visualise.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
